<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AprilTag 36h11 – Test IDs 0, 1, 2</title>
  <style>
    body { font-family: monospace; background: #1a1a20; color: #e8e8ec; padding: 1rem; margin: 0; }
    h1 { font-size: 1rem; color: #00d4aa; }
    .row { display: flex; flex-wrap: wrap; gap: 1.5rem; align-items: flex-end; margin-top: 1rem; }
    .tag-wrap { text-align: center; }
    .tag-wrap canvas { display: block; background: #fff; border: 1px solid #2a2a32; border-radius: 6px; }
    .tag-wrap .label { margin-top: 0.5rem; font-size: 0.9rem; color: #00d4aa; }
    .bit-dump { margin-top: 1.5rem; font-size: 0.75rem; color: var(--muted,#888); }
    .bit-dump table { border-collapse: collapse; }
    .bit-dump th, .bit-dump td { border: 1px solid #2a2a32; padding: 0.2rem 0.4rem; text-align: center; }
    .bit-dump .bit1 { background: #00d4aa; color: #0f0f12; }
  </style>
</head>
<body>
  <h1>AprilTag 36h11 – Test: ID 0, 1, 2</h1>
  <div class="row" id="out"></div>
  <div class="bit-dump" id="bitDump"></div>

  <script>
    (function () {
      var CODE_LIST_36H11 = [0x0d7e00984b,0x0dda664ca7,0x0dc4a1c821,0x0e17b470e9,0x0ef91d01b1,0x0f429cdd73,0x005da29225,0x01106cba43,0x0223bed79d,0x021f51213c,0x033eb19ca6,0x03f76eb0f8,0x0469a97414,0x045dcfe0b0,0x04a6465f72,0x051801db96,0x05eb946b4e,0x068a7cc2ec,0x06f0ba2652,0x078765559d,0x087b83d129,0x086cc4a5c5,0x08b64df90f,0x09c577b611,0x0a3810f2f5,0x0af4d75b83,0x0b59a03fef,0x0bb1096f85,0x0d1b92fc76,0x0d0dd509d2,0x0e2cfda160,0x02ff497c63,0x047240671b,0x05047a2e55,0x0635ca87c7,0x0691254166,0x068f43d94a,0x06ef24bdb6,0x08cdd8f886,0x09de96b718,0x0aff6e5a8a,0x0bae46f029,0x0d225b6d59,0x0df8ba8c01,0x0e3744a22f,0x0fbb59375d,0x018a916828,0x022f29c1ba,0x0286887d58,0x041392322e,0x075d18ecd1,0x087c302743,0x08c6317ba9,0x09e40f36d7,0x0c0e5a806a,0x0cc78cb87c,0x012d2f2d01,0x0379f36a21,0x06973f59ac,0x07789ea9f4,0x08f1c73e84,0x08dd287a20,0x094a4eee4c,0x0a455379b5,0x0a9e92987d,0x0bd25cb40b,0x0be98d3582,0x0d3d5972b2,0x014c53d7c7,0x04f1796936,0x04e71fed1a,0x066d46fae0,0x0a55abb933,0x0ebee1acca,0x01ad4ba6a4,0x0305b17571,0x0553611351,0x059ca62775,0x07819cb6a1,0x0edb7bc9eb,0x05b2694212,0x072e12d185,0x0ed6152e2c,0x05bcdadbf3,0x078e0aa0c6,0x0c60a0b909,0x0ef9a34b0d,0x0398a6621a,0x0a8a27c944,0x04b564304e,0x052902b4e2,0x0857280b56,0x0a91b2c84b,0x0e91df939b,0x01fa405f28,0x023793ab86,0x068c17729f,0x09fbf3b840,0x036922413c,0x04eb5f946e,0x0533fe2404,0x063de7d35e,0x0925eddc72,0x099b8b3896,0x0aace4c708,0x0c22994af0,0x08f1eae41b,0x0d95fb486c,0x013fb77857,0x04fe0983a3,0x0d559bf8a9,0x0e1855d78d,0x0fec8daaad,0x071ecb6d95,0x0dc9e50e4c,0x0ca3a4c259,0x0740d12bbf,0x0aeedd18e0,0x0b509b9c8e,0x05232fea1c,0x019282d18b,0x076c22d67b,0x0936beb34b,0x008a5ea8dd,0x0679eadc28,0x0a08e119c5,0x020a6e3e24,0x07eab9c239,0x096632c32e,0x0470d06e44,0x08a70212fb,0x00a7e4251b,0x09ec762cc0,0x0d8a3a1f48,0x0db680f346,0x04a1e93a9d,0x0638ddc04f,0x04c2fcc993,0x001ef28c95,0x0bf0d9792d,0x06d27557c3,0x0623f977f4,0x035b43be57,0x0bb0c428d5,0x0a6f01474d,0x05a70c9749,0x020ddabc3b,0x02eabd78cf,0x090aa18f88,0x0a9ea89350,0x03cdb39b22,0x0839a08f34,0x0169bb814e,0x01a575ab08,0x0a04d3d5a2,0x0bf7902f2b,0x0095a5e65c,0x092e8fce94,0x067ef48d12,0x06400dbcac,0x0b12d8fb9f,0x00347f45d3,0x0b35826f56,0x0c546ac6e4,0x081cc35b66,0x041d14bd57,0x00c052b168,0x07d6ce5018,0x0ab4ed5ede,0x05af817119,0x0d1454b182,0x02badb090b,0x003fcb4c0c,0x02f1c28fd8,0x093608c6f7,0x04c93ba2b5,0x007d950a5d,0x0e54b3d3fc,0x015560cf9d,0x0189e4958a,0x062140e9d2,0x0723bc1cdb,0x02063f26fa,0x0fa08ab19f,0x07955641db,0x0646b01daa,0x071cd427cc,0x009a42f7d4,0x0717edc643,0x015eb94367,0x08392e6bb2,0x0832408542,0x02b9b874be,0x0b21f4730d,0x0b5d8f24c9,0x07dbaf6931,0x01b4e33629,0x013452e710,0x0e974af612,0x01df61d29a,0x099f2532ad,0x0e50ec71b4,0x05df0a36e8,0x04934e4cea,0x0e34a0b4bd,0x0b7b26b588,0x00f255118d,0x0d0c8fa31e,0x006a50c94f,0x0f28aa9f06,0x0131d194d8,0x0622e3da79,0x0ac7478303,0x0c8f2521d7,0x06c9c881f5,0x049e38b60a,0x0513d8df65,0x0d7c2b0785,0x09f6f9d75a,0x09f6966020,0x01e1a54e33,0x0c04d63419,0x0946e04cd7,0x01bdac5902,0x056469b830,0x0ffad59569,0x086970e7d8,0x08a4b41e12,0x0ad4688e3b,0x085f8f5df4,0x0d833a0893,0x02a36fdd7c,0x0d6a857cf2,0x08829bc35c,0x05e50d79bc,0x0fbb8035e4,0x0c1a95bebf,0x0036b0baf8,0x0e0da964ea,0x0b6483689b,0x07c8e2f4c1,0x05b856a23b,0x02fc183995,0x0e914b6d70,0x0b31041969,0x01bb478493,0x0063e2b456,0x0f2a082b9c,0x08e5e646ea,0x008172f8f6,0x00dacd923e,0x0e5dcf0e2e,0x0bf9446bae,0x04822d50d1,0x026e710bf5,0x0b90ba2a24,0x0f3b25aa73,0x0809ad589b,0x094cc1e254,0x05334a3adb,0x0592886b2f,0x0bf64704aa,0x0566dbf24c,0x072203e692,0x064e61e809,0x0d7259aad6,0x07b924aedc,0x02df2184e8,0x0353d1eca7,0x0fce30d7ce,0x0f7b0f436e,0x057e8d8f68,0x08c79e60db,0x09c8362b2b,0x063a5804f2,0x09298353dc,0x06f98a71c8,0x0a5731f693,0x021ca5c870,0x01c2107fd3,0x06181f6c39,0x019e574304,0x0329937606,0x0043d5c70d,0x09b18ff162,0x08e2ccfebf,0x072b7b9b54,0x09b71f4f3c,0x0935d7393e,0x065938881a,0x06a5bd6f2d,0x0a19783306,0x0e6472f4d7,0x081163df5a,0x0a838e1cbd,0x0982748477,0x0050c54feb,0x00d82fbb58,0x02c4c72799,0x097d259ad6,0x022d9a43ed,0x0fdb162a9f,0x00cb4a727d,0x04fae2e371,0x0535b5be8b,0x048795908a,0x0ce7c18962,0x04ea154d80,0x050c064889,0x08d97fc75d,0x0c8bd9ec61,0x083ee8e8bb,0x0c8431419a,0x01aa78079d,0x08111aa4a5,0x0dfa3a69fe,0x051630d83f,0x02d930fb3f,0x02133116e5,0x0ae5395522,0x0bc07a4e8a,0x057bf08ba0,0x06cb18036a,0x0f0e2e4b75,0x03eb692b6f,0x0d8178a3fa,0x0238cce6a6,0x0e97d5cdd7,0x0fe10d8d5e,0x0b39584a1d,0x0ca03536fd,0x0aa61f3998,0x072ff23ec2,0x015aa7d770,0x057a3a1282,0x0d1f3902dc,0x06554c9388,0x0fd01283c7,0x0e8baa42c5,0x072cee6adf,0x0f6614b3fa,0x095c3778a2,0x07da4cea7a,0x0d18a5912c,0x0d116426e5,0x027c17bc1c,0x0b95b53bc1,0x0c8f937a05,0x0ed220c9bd,0x00c97d72ab,0x08fb1217ae,0x025ca8a5a1,0x0b261b871b,0x01bef0a056,0x0806a51179,0x0eed249145,0x03f82aeceb,0x0cc56e9acf,0x02e78d01eb,0x0102cee17f,0x037caad3d5,0x016ac5b1ee,0x02af164ece,0x0d4cd81dc9,0x012263a7e7,0x057ac7d117,0x09391d9740,0x07aedaa77f,0x09675a3c72,0x0277f25191,0x0ebb6e64b9,0x07ad3ef747,0x012759b181,0x0948257d4d,0x0b63a850f6,0x03a52a8f75,0x04a019532c,0x0a021a7529,0x0cc661876d,0x04085afd05,0x0e7048e089,0x03f979cdc6,0x0d9da9071b,0x0ed2fc5b68,0x079d64c3a1,0x0fd44e2361,0x08eea46a74,0x042233b9c2,0x0ae4d1765d,0x07303a094c,0x02d7033abe,0x03dcc2b0b4,0x00f0967d09,0x006f0cd7de,0x009807aca0,0x03a295cad3,0x02b106b202,0x03f38a828e,0x078af46596,0x0bda2dc713,0x09a8c8c9d9,0x06a0f2ddce,0x0a76af6fe2,0x0086f66fa4,0x0d52d63f8d,0x089f7a6e73,0x0cc6b23362,0x0b4ebf3c39,0x0564f300fa,0x0e8de3a706,0x079a033b61,0x0765e160c5,0x0a266a4f85,0x0a68c38c24,0x0dca0711fb,0x085fba85ba,0x037a207b46,0x0158fcc4d0,0x00569d79b3,0x07b1a25555,0x0a8ae22468,0x07c592bdfd,0x00c59a5f66,0x0b1115daa3,0x0f17c87177,0x06769d766b,0x02b637356d,0x013d8685ac,0x0f24cb6ec0,0x00bd0b56d1,0x042ff0e26d,0x0b41609267,0x096f9518af,0x0c56f96636,0x04a8e10349,0x0863512171,0x0ea455d86c,0x0bd0e25279,0x0e65e3f761,0x036c84a922,0x085fd1b38f,0x0657c91539,0x015033fe04,0x009051c921,0x0ab27d80d8,0x0f92f7d0a1,0x08eb6bb737,0x010b5b0f63,0x06c9c7ad63,0x0f66fe70ae,0x0ca579bd92,0x0956198e4d,0x029e4405e5,0x0e44eb885c,0x041612456c,0x0ea45e0abf,0x0d326529bd,0x07b2c33cef,0x080bc9b558,0x07169b9740,0x0c37f99209,0x031ff6dab9,0x0c795190ed,0x0a7636e95f,0x09df075841,0x055a083932,0x0a7cbdf630,0x0409ea4ef0,0x092a1991b6,0x04b078dee9,0x0ae18ce9e4,0x05a6e1ef35,0x01a403bd59,0x031ea70a83,0x02bc3c4f3a,0x05c921b3cb,0x0042da05c5,0x01f667d16b,0x0416a368cf,0x0fbc0a7a3b,0x09419f0c7c,0x081be2fa03,0x034e2c172f,0x028648d8ae,0x0c7acbb885,0x045f31eb6a,0x0d1cfc0a7b,0x042c4d260d,0x0cf6584097,0x094b132b14,0x03c5c5df75,0x08ae596fef,0x0aea8054eb,0x00ae9cc573,0x0496fb731b,0x0ebf105662,0x0af9c83a37,0x0c0d64cd6b,0x07b608159a,0x0e74431642,0x0d6fb9d900,0x0291e99de0,0x010500ba9a,0x05cd05d037,0x0a87254fb2,0x09d7824a37,0x08b2c7b47c,0x030c788145,0x02f4e5a8be,0x0badb884da,0x0026e0d5c9,0x06fdbaa32e,0x034758eb31,0x0565cd1b4f,0x02bfd90fb0,0x0093052a6b,0x0d3c13c4b9,0x02daea43bf,0x0a279762bc,0x0f1bd9f22c,0x04b7fec94f,0x0545761d5a,0x07327df411,0x01b52a442e,0x049b0ce108,0x024c764bc8,0x0374563045,0x0a3e8f91c6,0x00e6bd2241,0x0e0e52ee3c,0x007e8e3caa,0x096c2b7372,0x033acbdfda,0x0b15d91e54,0x0464759ac1,0x06886a1998,0x057f5d3958,0x05a1f5c1f5,0x00b58158ad,0x0e712053fb,0x05352ddb25,0x0414b98ea0,0x074f89f546,0x038a56b3c3,0x038db0dc17,0x0aa016a755,0x0dc72366f5,0x00cee93d75,0x0b2fe7a56b,0x0a847ed390,0x08713ef88c,0x0a217cc861,0x08bca25d7b,0x0455526818,0x0ea3a7a180,0x0a9536e5e0,0x09b64a1975,0x05bfc756bc,0x0046aa169b,0x053a17f76f,0x04d6815274,0x0cca9cf3f6,0x04013fcb8b,0x03d26cdfa5,0x05786231f7,0x07d4ab09ab,0x0960b5ffbc,0x08914df0d4,0x02fc6f2213,0x0ac235637e,0x0151b28ed3,0x046f79b6db,0x01382e0c9f,0x053abf983a,0x0383c47ade,0x03fcf88978,0x0eb9079df7,0x009af0714d,0x0da19d1bb7,0x09a02749f8,0x01c62dab9b,0x01a137e44b,0x02867718c7,0x035815525b,0x07cd35c550,0x02164f73a0,0x0e8b772fe0];
      var APRILTAG_BIT_X = [1,2,3,4,5,2,3,4,3,6,6,6,6,6,5,5,5,4,6,5,4,3,2,5,4,3,4,1,1,1,1,1,2,2,2,3];
      var APRILTAG_BIT_Y = [1,1,1,1,1,2,2,2,3,1,2,3,4,5,2,3,4,3,6,6,6,6,6,5,5,5,4,6,5,4,3,2,5,4,3,4];

      // AprilTag 36h11: 8x8, 1-Zellen-Rahmen – exakt gleiche Logik wie apriltag36h11_gen.py.
      // Wichtig: Code ist 36 Bit; JS-Bitoperationen (>>> &) nutzen nur 32 Bit → obere 4 Bits wären 0.
      // Bit i (0=MSB) sicher extrahieren: Math.floor(code / 2^(35-i)) & 1
      var SIZE_CELLS = 8;
      function getBit36(code, bitIndex) {
        return (Math.floor(code / Math.pow(2, 35 - bitIndex)) & 1);
      }
      function drawAprilTag36h11(ctx, code, x, y, cellPx) {
        var size = SIZE_CELLS * cellPx;
        ctx.fillStyle = '#000';
        ctx.fillRect(x, y, size, size);
        ctx.fillStyle = '#fff';
        for (var i = 0; i < 36; i++) {
          if (getBit36(code, i) === 0) continue;
          var bx = APRILTAG_BIT_X[i], by = APRILTAG_BIT_Y[i];
          ctx.fillRect(x + bx * cellPx, y + by * cellPx, cellPx, cellPx);
        }
      }

      var ids = [0, 1, 2, 3, 4];
      var cellPx = 12;
      var size = SIZE_CELLS * cellPx;

      var wrap = document.getElementById('out');
      for (var j = 0; j < ids.length; j++) {
        var div = document.createElement('div');
        div.className = 'tag-wrap';
        var c = document.createElement('canvas');
        c.width = size;
        c.height = size;
        var ctx2 = c.getContext('2d');
        ctx2.fillStyle = '#fff';
        ctx2.fillRect(0, 0, size, size);
        drawAprilTag36h11(ctx2, CODE_LIST_36H11[ids[j]], 0, 0, cellPx);
        div.appendChild(c);
        var lbl = document.createElement('div');
        lbl.className = 'label';
        lbl.textContent = 'ID ' + ids[j];
        div.appendChild(lbl);
        wrap.appendChild(div);
      }

      // Bit-Dump zur Kontrolle: für ID 0,1,2 die 36 Bits (MSB=0) und Position (x,y)
      var dump = document.getElementById('bitDump');
      var tbl = document.createElement('table');
      var header = '<tr><th>ID</th><th>Code (hex)</th>';
      for (var i = 0; i < 36; i++) header += '<th title="(' + APRILTAG_BIT_X[i] + ',' + APRILTAG_BIT_Y[i] + ')">' + i + '</th>';
      header += '</tr>';
      tbl.innerHTML = header;
      for (var k = 0; k < ids.length; k++) {
        var id = ids[k];
        var code = CODE_LIST_36H11[id];
        var row = '<tr><td>' + id + '</td><td>0x' + code.toString(16) + '</td>';
        for (var i = 0; i < 36; i++) {
          var b = getBit36(code, i);
          row += '<td class="' + (b ? 'bit1' : '') + '">' + b + '</td>';
        }
        row += '</tr>';
        tbl.insertAdjacentHTML('beforeend', row);
      }
      dump.appendChild(tbl);
      dump.innerHTML += '<p style="margin-top:0.5rem;">36 Bit (JS: getBit36, da <code>>>></code> nur 32 Bit nutzt), 8×8 – gleiche Codes wie apriltag36h11_gen.py.</p>';
    })();
  </script>
</body>
</html>
